åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†æ‰¾åˆ°åœ¨ [Hardhat](https://hardhat.org) é¡¹ç›®ä¸­æµ‹è¯• FHEVM æ™ºèƒ½åˆçº¦æ‰€éœ€çš„ä¸€åˆ‡ã€‚

## FHEVM è¿è¡Œæ—¶æ¨¡å¼

FHEVM Hardhat æ’ä»¶æä¾›äº†ä¸‰ç§ **FHEVM è¿è¡Œæ—¶æ¨¡å¼**ï¼Œä¸“ä¸ºåˆçº¦å¼€å‘å’Œæµ‹è¯•çš„ä¸åŒé˜¶æ®µé‡èº«å®šåˆ¶ã€‚æ¯ç§æ¨¡å¼éƒ½åœ¨é€Ÿåº¦ã€åŠ å¯†å’ŒæŒä¹…æ€§ä¹‹é—´æä¾›äº†ä¸€ç§æƒè¡¡ã€‚

1. **Hardhatï¼ˆå†…å­˜ä¸­ï¼‰** é»˜è®¤ç½‘ç»œï¼šğŸ§ª _ä½¿ç”¨æ¨¡æ‹ŸåŠ å¯†ã€‚_ éå¸¸é€‚åˆå¸¸è§„æµ‹è¯•ã€CI æµ‹è¯•è¦†ç›–ç‡ä»¥åŠåœ¨æ—©æœŸåˆçº¦å¼€å‘æœŸé—´çš„å¿«é€Ÿåé¦ˆã€‚ä¸ä½¿ç”¨çœŸæ­£çš„åŠ å¯†ã€‚

2. **Hardhat èŠ‚ç‚¹ï¼ˆæœ¬åœ°æœåŠ¡å™¨ï¼‰** ç½‘ç»œï¼šğŸ§ª _ä½¿ç”¨æ¨¡æ‹ŸåŠ å¯†ã€‚_ å½“æ‚¨éœ€è¦æŒä¹…çŠ¶æ€æ—¶ï¼ˆä¾‹å¦‚ï¼Œåœ¨æµ‹è¯•å‰ç«¯äº¤äº’ã€æ¨¡æ‹Ÿç”¨æˆ·æµæˆ–åœ¨çœŸå®çš„æœ¬åœ°ç¯å¢ƒä¸­éªŒè¯éƒ¨ç½²æ—¶ï¼‰ï¼Œæ­¤æ¨¡å¼éå¸¸ç†æƒ³ã€‚ä»ç„¶ä½¿ç”¨æ¨¡æ‹ŸåŠ å¯†ã€‚

3. **Sepolia æµ‹è¯•ç½‘**ç½‘ç»œï¼šğŸ” _ä½¿ç”¨çœŸæ­£çš„åŠ å¯†ã€‚_ ä¸€æ—¦æ‚¨çš„åˆçº¦é€»è¾‘ç¨³å®šå¹¶åœ¨æœ¬åœ°å¾—åˆ°éªŒè¯ï¼Œå°±ä½¿ç”¨æ­¤æ¨¡å¼ã€‚è¿™æ˜¯å”¯ä¸€åœ¨å…·æœ‰**çœŸæ­£åŠ å¯†å€¼**çš„å®Œæ•´ FHEVM å †æ ˆä¸Šè¿è¡Œçš„æ¨¡å¼ã€‚å®ƒæ¨¡æ‹Ÿäº†çœŸå®çš„ç”Ÿäº§æ¡ä»¶ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢ï¼Œå¹¶ä¸”éœ€è¦ Sepolia ETHã€‚

{% hint style="success" %}
**Zama æµ‹è¯•ç½‘**æœ¬èº«ä¸æ˜¯ä¸€ä¸ªåŒºå—é“¾ã€‚å®ƒæ˜¯ä¸€ä¸ªåè®®ï¼Œä½¿æ‚¨èƒ½å¤Ÿåœ¨ç°æœ‰åŒºå—é“¾ï¼ˆä¾‹å¦‚ä»¥å¤ªåŠã€Base ç­‰ï¼‰ä¸Šè¿è¡Œæœºå¯†æ™ºèƒ½åˆçº¦ï¼Œå¹¶æ”¯æŒåŠ å¯†ç±»å‹ã€‚è¯·å‚é˜… [åŒºå—é“¾ä¸Šçš„ FHE](https://docs.zama.ai/protocol/protocol/overview) æŒ‡å—ä»¥äº†è§£æœ‰å…³åè®®æ¶æ„çš„æ›´å¤šä¿¡æ¯ã€‚

ç›®å‰ï¼Œ**Zama åè®®**å¯åœ¨ **Sepolia æµ‹è¯•ç½‘**ä¸Šä½¿ç”¨ã€‚å°†æ¥ä¼šå¢åŠ å¯¹å…¶ä»–é“¾çš„æ”¯æŒã€‚[æŸ¥çœ‹è·¯çº¿å›¾â†—](https://docs.zama.ai/protocol/zama-protocol-litepaper#roadmap)
{% endhint %}

### æ€»ç»“

| æ¨¡å¼ | åŠ å¯† | æŒä¹… | é“¾ | é€Ÿåº¦ | ç”¨é€” |
| --- | --- | --- | --- | --- | --- |
| Hardhat (é»˜è®¤) | ğŸ§ª æ¨¡æ‹Ÿ | âŒ å¦ | å†…å­˜ä¸­ | âš¡âš¡ éå¸¸å¿« | å¿«é€Ÿæœ¬åœ°æµ‹è¯•å’Œè¦†ç›–ç‡ |
| Hardhat èŠ‚ç‚¹ | ğŸ§ª æ¨¡æ‹Ÿ | âœ… æ˜¯ | æœåŠ¡å™¨ | âš¡ å¿« | å‰ç«¯é›†æˆå’Œæœ¬åœ°æŒä¹…æµ‹è¯• |
| Sepolia æµ‹è¯•ç½‘ | ğŸ” çœŸæ­£åŠ å¯† | âœ… æ˜¯ | æœåŠ¡å™¨ | ğŸ¢ æ…¢ | ä½¿ç”¨çœŸæ­£åŠ å¯†æ•°æ®è¿›è¡Œå…¨æ ˆéªŒè¯ |

## FHEVM Hardhat æ¨¡æ¿

ä¸ºäº†æ¼”ç¤ºè¿™ä¸‰ç§å¯ç”¨çš„æµ‹è¯•æ¨¡å¼ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ [fhevm-hardhat-template](https://github.com/zama-ai/fhevm-hardhat-template)ï¼Œå…¶ä¸­é¢„è£…äº† FHEVM Hardhat æ’ä»¶ã€ä¸€ä¸ªåŸºæœ¬çš„ `FHECounter` æ™ºèƒ½åˆçº¦ä»¥åŠç”¨äºä¸æ­¤åˆçº¦çš„å·²éƒ¨ç½²å®ä¾‹è¿›è¡Œäº¤äº’çš„ç°æˆä»»åŠ¡ã€‚

## åœ¨ Hardhatï¼ˆé»˜è®¤ï¼‰ä¸Šè¿è¡Œ

è¦åœ¨å†…å­˜ä¸­ä½¿ç”¨ FHEVM æ¨¡æ‹Ÿå€¼è¿è¡Œæ‚¨çš„æµ‹è¯•ï¼Œåªéœ€è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```sh
npx hardhat test --network hardhat
```

## åœ¨ Hardhat èŠ‚ç‚¹ä¸Šè¿è¡Œ

æ‚¨è¿˜å¯ä»¥åœ¨æœ¬åœ° Hardhat èŠ‚ç‚¹ä¸Šè¿è¡Œæ‚¨çš„æµ‹è¯•ï¼Œä»è€Œå…è®¸æ‚¨éƒ¨ç½²åˆçº¦å®ä¾‹å¹¶åœ¨æŒä¹…ç¯å¢ƒä¸­ä¸å®ƒä»¬è¿›è¡Œäº¤äº’ã€‚

{% stepper %}
{% step %}

#### å¯åŠ¨ Hardhat èŠ‚ç‚¹æœåŠ¡å™¨ï¼š

- æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ã€‚
- ä»æ ¹é¡¹ç›®ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```sh
npx hardhat node
```

{% endstep %}
{% step %}

#### è¿è¡Œæ‚¨çš„æµ‹è¯•å¥—ä»¶ï¼ˆå¯é€‰ï¼‰ï¼š

ä»æ ¹é¡¹ç›®ç›®å½•ï¼š

```sh
npx hardhat test --network localhost
```

{% endstep %}
{% step %}

#### åœ¨ Hardhat èŠ‚ç‚¹ä¸Šéƒ¨ç½² `FHECounter` æ™ºèƒ½åˆçº¦

ä»æ ¹é¡¹ç›®ç›®å½•ï¼š

```sh
npx hardhat deploy --network localhost
```

æ£€æŸ¥å·²éƒ¨ç½²çš„åˆçº¦ FHEVM é…ç½®ï¼š

```sh
npx hardhat fhevm check-fhevm-compatibility --network localhost --address <deployed contract address>
```

{% endstep %}
{% step %}

#### ä¸å·²éƒ¨ç½²çš„ `FHECounter` æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’

ä»æ ¹é¡¹ç›®ç›®å½•ï¼š

1. è§£å¯†å½“å‰çš„è®¡æ•°å™¨å€¼ï¼š

```sh
npx hardhat --network localhost task:decrypt-count
```

2. å°†è®¡æ•°å™¨åŠ  1ï¼š

```sh
npx hardhat --network localhost task:increment --value 1
```

3. è§£å¯†æ–°çš„è®¡æ•°å™¨å€¼ï¼š

```sh
npx hardhat --network localhost task:decrypt-count
```

{% endstep %}
{% endstepper %}

## åœ¨ Sepolia ä»¥å¤ªåŠæµ‹è¯•ç½‘ä¸Šè¿è¡Œ

è¦ä½¿ç”¨çœŸæ­£çš„åŠ å¯†å€¼æµ‹è¯•æ‚¨çš„ FHEVM æ™ºèƒ½åˆçº¦ï¼Œæ‚¨å¯ä»¥åœ¨ Sepolia æµ‹è¯•ç½‘ä¸Šè¿è¡Œæ‚¨çš„æµ‹è¯•ã€‚

{% stepper %}
{% step %}

#### ä¸º Sepolia é‡æ–°æ„å»ºé¡¹ç›®

ä»æ ¹é¡¹ç›®ç›®å½•ï¼š

```sh
npx hardhat clean
npx hardhat compile --network sepolia
```

{% endstep %}
{% step %}

#### åœ¨ Sepolia ä¸Šéƒ¨ç½² `FHECounter` æ™ºèƒ½åˆçº¦

```sh
npx hardhat deploy --network sepolia
```

{% endstep %}
{% step %}

#### æ£€æŸ¥å·²éƒ¨ç½²çš„ `FHECounter` åˆçº¦ FHEVM é…ç½®

ä»æ ¹é¡¹ç›®ç›®å½•ï¼š

```sh
npx hardhat fhevm check-fhevm-compatibility --network sepolia --address <deployed contract address>
```

å¦‚æœå¼•å‘å†…éƒ¨å¼‚å¸¸ï¼Œåˆ™å¾ˆå¯èƒ½æ„å‘³ç€è¯¥åˆçº¦æœªæ­£ç¡®ç¼–è¯‘ä¸º Sepolia ç½‘ç»œã€‚

{% endstep %}
{% step %}

#### ä¸å·²éƒ¨ç½²çš„ `FHECounter` åˆçº¦è¿›è¡Œäº¤äº’

ä»æ ¹é¡¹ç›®ç›®å½•ï¼š

1. è§£å¯†å½“å‰çš„è®¡æ•°å™¨å€¼ï¼ˆâ³ ç­‰å¾…...ï¼‰ï¼š

```sh
npx hardhat --network sepolia task:decrypt-count
```

2. å°†è®¡æ•°å™¨åŠ  1ï¼ˆâ³ ç­‰å¾…...ï¼‰ï¼š

```sh
npx hardhat --network sepolia task:increment --value 1
```

3. è§£å¯†æ–°çš„è®¡æ•°å™¨å€¼ï¼ˆâ³ ç­‰å¾…...ï¼‰ï¼š

```sh
npx hardhat --network sepolia task:decrypt-count
```

{% endstep %}
{% endstepper %}
